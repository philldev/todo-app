(this["webpackJsonptodo-app-views"]=this["webpackJsonptodo-app-views"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(68),l=a.n(o),c=a(18),i=a(126),s=a(3),u=a(30),m=a(13),d=(a(85),a(7)),p=a(12),g=a(11),b=a(9),h=a.n(b),f=a(21),E=a(8),x=a.n(E),v=function(){var e=Object(f.a)(h.a.mark((function e(t,a,n,r){var o,l,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=localStorage.getItem("AuthToken"),e.prev=1,x.a.defaults.headers.common={Authorization:"".concat(o)},e.next=5,x.a.get("/api/user",{cancelToken:r.token});case 5:return l=e.sent,e.next=8,l.data.userCredentials;case 8:c=e.sent,a(c),t(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0&&n.push("/login"),t(!1);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(h.a.mark((function e(t,a,n){var r,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("AuthToken"),e.prev=1,console.log("fetching"),x.a.defaults.headers.common={Authorization:"".concat(r)},e.next=6,x.a.get("/api/todos",{cancelToken:n.token});case 6:return o=e.sent,e.next=9,o.data;case 9:l=e.sent,t(l),a(!1),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,a,n){return e.apply(this,arguments)}}(),k=a(69),C=a.n(k),O=Object(n.createContext)(),j=function(e){var t=e.children,a=Object(n.useState)(null),o=Object(g.a)(a,2),l=o[0],c=o[1],i=Object(n.useState)([]),s=Object(g.a)(i,2),u=s[0],b=s[1],h=Object(n.useState)(!1),f=Object(g.a)(h,2),E=f[0],k=f[1],j=Object(m.f)();Object(n.useEffect)((function(){null===localStorage.getItem("AuthToken")&&j.push("/login")}),[j]),Object(n.useEffect)((function(){var e=x.a.CancelToken.source();return k(!0),v(k,c,j,e),y(b,k,e),function(){e.cancel()}}),[j]);var w={user:l,loading:E,todos:u,todosHandler:{handleSubmit:function(e){if(e.body){var t={body:e.body,id:C()("todo-"),completed:!1};b((function(e){return[].concat(Object(p.a)(e),[t])}));var a={url:"/api/todo",method:"post",data:t},n=localStorage.getItem("AuthToken");x.a.defaults.headers.common={Authorization:"".concat(n)},x()(a).then((function(e){})).catch((function(e){}))}},toggleCompleted:function(e){b((function(t){return t.map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{completed:!t.completed}):t}))}));var t=u.find((function(t){return t.id===e})),a={url:"/api/todo/".concat(e),method:"put",data:Object(d.a)(Object(d.a)({},t),{},{completed:!t.completed})},n=localStorage.getItem("AuthToken");x.a.defaults.headers.common={Authorization:"".concat(n)},x()(a).then((function(){console.log("success")})).catch((function(e){console.log("fail")}))},handleDelete:function(e){var t=localStorage.getItem("AuthToken");b((function(t){return t.filter((function(t){return t.id!==e}))})),x.a.defaults.headers.common={Authorization:"".concat(t)};var a=e;x.a.delete("/api/todo/".concat(a)).then((function(){console.log("successfully deleted a todo")})).catch((function(e){console.log(e)}))}}};return r.a.createElement(O.Provider,{value:w},t)},w=a(119),S=a(49),A=a(118),z=a(120),I=a(56),N=a(71),q=a(128),T=a(116),D=a(74),B=a(35),L=a(45),F=a.n(L),P=a(117);function R(){return r.a.createElement(T.a,{justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},r.a.createElement(N.a,{size:"sm"}))}function U(e){var t=e.children,a=e.title,o=Object(n.useContext)(O).user;return r.a.createElement(s.a,{zIndex:"0",ml:{base:"75px",lg:"170px"},px:{base:"15px",lg:"90px"},pt:{base:"15px",lg:"60px"},backgroundColor:"#1E2B39",width:"100%",minHeight:"100vh"},r.a.createElement(P.a,{fontSize:"50px"},a),o?t:r.a.createElement(R,null))}var _=a(127);function H(e){var t=e.label,a=e.name,n=e.type,o=e.register,l=e.required,c=e.value,i=e.errors,s=e.validation;return r.a.createElement(S.a,{mb:"1rem"},r.a.createElement(A.a,{htmlFor:a},t,l?" *":""),r.a.createElement(D.a,{defaultValue:c&&c,color:"white",backgroundColor:"#25313C",border:"none",ref:o&&o(s),type:n,id:a,name:a,isRequired:l}),i&&i[a]?r.a.createElement(_.a,{status:"error",backgroundColor:"inherit",color:"red.300",fontSize:"12px"},r.a.createElement(_.b,null),i[a]&&"required"===i[a].type&&r.a.createElement("span",null,t," is required"),i[a]&&"maxLength"===i[a].type&&r.a.createElement("span",null,"Max length exceeded"),i[a]&&"minLength"===i[a].type&&r.a.createElement("span",null,"your ",t," is too short! must be more than ",s.minLength)):null)}function J(e){e.profile;var t=Object(n.useContext)(O).user,a=Object(B.a)(),o=a.register,l=a.handleSubmit,c=Object(n.useState)({loading:!1}),i=Object(g.a)(c,2),u=i[0],p=i[1],b=Object(m.f)();return r.a.createElement(U,{title:t.username},r.a.createElement(w.a,{borderColor:"gray",my:"1rem"}),r.a.createElement(s.a,{as:"form",onSubmit:l((function(e){console.log(e),p({loading:!0});var t=localStorage.getItem("AuthToken");x.a.defaults.headers.common={Authorization:"".concat(t)};var a={firstName:e.firstName,lastName:e.lastName,country:e.country};x.a.post("/api/user",a).then((function(){p({loading:!1})})).catch((function(e){403===e.response.status&&b.push("/login"),console.log(e),p({loading:!1})}))}))},r.a.createElement(H,{label:"First Name",value:t.firstName,name:"firstName",register:o,type:"text",required:!1}),r.a.createElement(H,{label:"Last Name",value:t.lastName,name:"lastName",register:o,type:"text",required:!1}),r.a.createElement(H,{label:"username",value:t.username,name:"username",register:o,type:"text",required:!1}),r.a.createElement(w.a,{borderColor:"gray",my:"1rem"}),r.a.createElement(S.a,null,r.a.createElement(A.a,null,"Email"),r.a.createElement(z.a,{mb:"10px"},t.email),r.a.createElement(I.a,{border:"1px solid #BBC8D4",backgroundColor:"inherit",color:"#BBC8D4"},u.loading?r.a.createElement(N.a,null):"Reset email")),r.a.createElement(w.a,{borderColor:"gray",my:"1rem"}),r.a.createElement(s.a,{display:"flex"},r.a.createElement(S.a,null,r.a.createElement(A.a,{display:"block"},"Photo"),r.a.createElement(q.a,{size:"lg",name:"Prosper Otemuyiwa",src:""!==t.imageUrl?t.imageUrl:F.a,mb:"10px",mx:"auto"}),r.a.createElement(T.a,{direction:{base:"column",lg:"row"}},r.a.createElement(I.a,{type:"submit",border:"1px solid #BBC8D4",backgroundColor:"inherit",color:"#BBC8D4",onClick:function(e){e.preventDefault(),p(Object(d.a)(Object(d.a)({},u),{},{loading:!0}));var t=localStorage.getItem("AuthToken"),a=new FormData;a.append("image",u.image),x.a.defaults.headers.common={Authorization:"".concat(t)},x.a.post("/api/user/image",a,{headers:{"content-type":"multipart/form-data"}}).then((function(){window.location.reload()})).catch((function(e){403===e.response.status&&b.push("/login"),console.log(e),p(Object(d.a)(Object(d.a)({},u),{},{loading:!1}))}))}},u.loading?r.a.createElement(N.a,null):"Upload Photo"),r.a.createElement(D.a,{type:"file",backgroundColor:"inherit",border:"none",display:"inline",onChange:function(e){p(Object(d.a)(Object(d.a)({},u),{},{image:e.target.files[0]}))}})))),r.a.createElement(w.a,{borderColor:"gray",my:"1rem"}),r.a.createElement(I.a,{type:"submit",border:"1px solid #F65A18",backgroundColor:"#F65A18",color:"white"},u.loading?r.a.createElement(N.a,null):"Update Details")))}var M=a(122),W=a(75),X=a(51),V=a.n(X),Y=a(121),$=a(76),G=a.n($),K=a(77),Q=a.n(K),Z=a(78),ee=a.n(Z);function te(e){var t=e.handleClick,a=e.image,n=e.text,o=e.active,l=e.isOpen;return r.a.createElement(Y.a,{backgroundColor:o?"#F65A18":"#1E2B39",py:"3px",display:"flex",onClick:t,id:n,pl:"5px",mb:"10px",cursor:"pointer",border:"1px solid transparent",_hover:{border:"1px solid #F65A18"},transition:"border .2s ease-out"},r.a.createElement(W.a,{cursor:"pointer",src:a,mr:"1rem"}),r.a.createElement(z.a,{transition:"all .1s ease-out",opacity:{base:l?"1":"0",lg:"1"},transform:{base:l?"translateX(0)":"translateX(-50px)",lg:"scale(1)"},display:"block"},n))}function ae(e){var t=e.setRender,a=e.render,n=e.isOpen,o=Object(m.f)();return r.a.createElement(Y.b,{width:"100%",fontSize:"14px"},r.a.createElement(s.a,{onClick:function(){return t("todos")}},r.a.createElement(te,{image:Q.a,text:"todos",isOpen:n,active:"todos"===a})),r.a.createElement(s.a,{onClick:function(){return t("account")}},r.a.createElement(te,{image:G.a,text:"account",isOpen:n,active:"account"===a})),r.a.createElement(s.a,{mt:"auto",onClick:function(){localStorage.removeItem("AuthToken"),o.push("/login")}},r.a.createElement(te,{image:ee.a,text:"Logout",isOpen:n,active:!1})))}var ne=function(e,t){var a=function(a){e.current&&!e.current.contains(a.target)&&t()};Object(n.useEffect)((function(){return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}))};function re(e){var t=e.setRender,a=e.render,o=Object(n.useContext)(O).user,l=Object(n.useState)(!1),c=Object(g.a)(l,2),i=c[0],s=c[1],u=Object(n.useRef)();return ne(u,(function(){s(!1)})),r.a.createElement(T.a,{ref:u,zIndex:"1",position:"fixed",left:"0",top:"0",direction:"column",width:{base:i?"170px":"75px",lg:"170px"},backgroundColor:"#121A21",px:"20px",height:"100vh",transition:"all .3s ease-out"},r.a.createElement(M.a,{display:{base:"block",lg:"none"},backgroundColor:"inherit",variantColor:"orange","aria-label":"Send email",icon:"arrow-right",size:"sm",mt:"15px",ml:"auto",transform:i?"rotate(180deg)":"",transition:"transform .3s ease-out",onClick:function(){s(!i)},_focus:{outline:"none"}}),r.a.createElement(W.a,{src:V.a,mt:"20px",mb:"50px"}),o?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(q.a,{size:{base:"sm",lg:"md"},name:"Prosper Otemuyiwa",src:""!==o.imageUrl?o.imageUrl:F.a,mb:"30px",mx:"auto"}),r.a.createElement(ae,{setRender:t,render:a,isOpen:i})," "):r.a.createElement(R,null))}var oe=a(123),le=a(55);function ce(e){var t=e.handleSubmit,a=Object(B.a)(),n=a.register,o=a.errors,l=a.handleSubmit,c=o.body&&"required"===o.body.type;return r.a.createElement(S.a,{as:"form",my:"2rem",onSubmit:l(t)},r.a.createElement(oe.a,null,r.a.createElement(D.a,{ref:n({required:!0}),placeholder:c?"Cannot be empty!":"Add todos...",name:"body",border:"none",backgroundColor:"inherit",borderBottom:"1px solid black",borderTop:"1px solid black",borderRadius:"0",_focus:{outline:"none"},_placeholder:{color:c?"red.300":"inherit"}}),r.a.createElement(le.b,{children:r.a.createElement(M.a,{backgroundColor:"inherit",type:"submit",icon:"add",color:"orange.500",_hover:{backgroundColor:"inherit",transform:"scale(1.2)"}})})))}var ie=a(125);function se(e){var t=e.todo,a=e.handleDelete,n=e.toggleCompleted;return r.a.createElement(Y.a,{backgroundColor:"inherit",mb:"15px",display:"flex",justifyContent:"space-between",role:"group"},r.a.createElement(T.a,{alignItems:"center"},r.a.createElement(ie.a,{variantColor:"orange",color:"gray.50",borderColor:"gray.200",isChecked:t.completed,onChange:function(){n(t.id)}}),r.a.createElement(z.a,{fontSize:"18px",pl:"20px",textDecor:t.completed?"line-through":""},t.body)),r.a.createElement(s.a,{display:"flex",alignItems:"center"},r.a.createElement(M.a,{backgroundColor:"inherit",opacity:"0",color:"red.300",float:"right",icon:"delete",size:"16px",cursor:"pointer",onClick:function(){a(t.id)},_hover:{backgroundColor:"inherit"},_groupHover:{opacity:1},transition:"opacity .2s ease-in"})))}function ue(e){var t=e.todos,a=e.handleDelete,n=e.toggleCompleted;return r.a.createElement(Y.b,null,0===t.length?r.a.createElement(z.a,null,"You have no todos.. add one above"):null,t.map((function(e){return r.a.createElement(se,{key:e.id,todo:e,handleDelete:a,toggleCompleted:n})})))}function me(){var e=Object(n.useContext)(O),t=e.todos,a=e.todosHandler,o=e.loading;return r.a.createElement(U,{title:"Todos"},o?r.a.createElement(T.a,{width:"100%",height:"100%",justifyContent:"center",alignItems:"center"},r.a.createElement(N.a,null)):r.a.createElement(r.a.Fragment,null," ",r.a.createElement(ce,{handleSubmit:a.handleSubmit}),r.a.createElement(ue,{todos:t,toggleCompleted:a.toggleCompleted,handleDelete:a.handleDelete})," "))}function de(){var e=Object(n.useState)("todos"),t=Object(g.a)(e,2),a=t[0],o=t[1];return r.a.createElement(s.a,{display:"flex",as:"main"},r.a.createElement(re,{setRender:o,render:a}),"todos"===a?r.a.createElement(me,null):r.a.createElement(J,null))}var pe=a(124),ge=a(79),be=a.n(ge);function he(e){var t=e.children;return r.a.createElement(T.a,null,r.a.createElement(T.a,{px:{base:"25px",lg:"40px"},py:{base:"40px",lg:"40px"},backgroundColor:"#1E2B39",flexDirection:"column",justifyContent:"center",width:{base:"100vw",lg:"400px"},height:"100vh",flexShrink:"0"},r.a.createElement(W.a,{src:V.a,my:"25px"}),t),r.a.createElement(W.a,{mx:"auto",display:{base:"none",lg:"block"},width:"400px",src:be.a}))}var fe=[{type:"email",label:"Email",name:"email",validation:{required:!0}},{type:"password",label:"Password",name:"password",validation:{required:!0,minLength:8}},{type:"password",label:"Confirm password",name:"confirmPassword",validation:{required:!0,minLength:8}},{type:"text",label:"First Name",name:"firstName",validation:{required:!0,maxLength:20}},{type:"text",label:"Last name",name:"lastName",validation:{required:!0,maxLength:20}},{type:"text",label:"Username",name:"username",validation:{required:!0,maxLength:20,minLength:4}}],Ee=[{type:"email",label:"Email",name:"email"},{type:"password",label:"Password",name:"password"}];function xe(){var e=Object(m.f)(),t=Object(n.useState)({errors:[],loading:!1}),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(B.a)(),i=c.register,p=c.errors,b=c.handleSubmit;return r.a.createElement(he,null,r.a.createElement(s.a,{as:"form",width:"100%",onSubmit:b((function(t){l(Object(d.a)(Object(d.a)({},o),{},{errors:[],loading:!0}));var a={email:t.email,password:t.password};x.a.post("/api/login",a).then((function(t){localStorage.setItem("AuthToken","Bearer ".concat(t.data.token)),l(Object(d.a)(Object(d.a)({},o),{},{loading:!1})),e.push("/")})).catch((function(e){console.log(e.response.data),e.response.data.general&&l({errors:e.response.data.general,loading:!1})}))}))},Ee.map((function(e,t){return r.a.createElement(H,{key:t,type:e.type,name:e.name,label:e.label,register:i,errors:p})})),r.a.createElement(S.a,{mb:"1rem"},r.a.createElement(I.a,{type:"submit",backgroundColor:"#F65A18",color:"white",mt:"40px",py:"8px",fontSize:"14px",display:"block",width:"100%"},o.loading?r.a.createElement(N.a,null):"Login")),r.a.createElement(z.a,null,"Dont have an account?"," ",r.a.createElement(pe.a,{as:u.b,to:"/signup",color:"green.100"},"Click here.")," ","Its free"," "),o.errors.length>0&&r.a.createElement(_.a,{status:"error",backgroundColor:"inherit",color:"red.300"},r.a.createElement(_.b,null),o.errors)))}function ve(){var e=Object(m.f)(),t=Object(n.useState)({errors:[],loading:!1}),a=Object(g.a)(t,2),o=a[0],l=a[1],c=Object(B.a)(),i=c.register,b=c.errors,h=c.handleSubmit;return console.log(b),r.a.createElement(he,null,r.a.createElement(s.a,{as:"form",width:"100%",onSubmit:h((function(t){l(Object(d.a)(Object(d.a)({},o),{},{errors:[],loading:!0})),t.password!==t.confirmPassword&&l(Object(d.a)(Object(d.a)({},o),{},{errors:[].concat(Object(p.a)(o.errors),["Password is not equal"]),loading:!1}));var a={firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,country:t.country,username:t.username,email:t.email,password:t.password,confirmPassword:t.confirmPassword};x.a.post("/api/signup",a).then((function(t){console.log(t),localStorage.setItem("AuthToken","".concat(t.data.token)),console.log(t.data.token),l(Object(d.a)(Object(d.a)({},o),{},{loading:!1})),e.push("/")})).catch((function(e){console.log(e.response.data),l({errors:e.response.data,loading:!1})}))}))},fe.map((function(e,t){return r.a.createElement(H,{key:t,type:e.type,name:e.name,label:e.label,register:i,validation:e.validation,errors:b})})),r.a.createElement(ie.a,{ref:i({required:!0})},"Agree. Terms & conditions"),r.a.createElement(S.a,{mb:"1rem",textAlign:"center"},r.a.createElement(I.a,{type:"submit",backgroundColor:"#F65A18",color:"white",mt:"40px",py:"8px",fontSize:"14px",display:"block",width:"100%",_hover:{backgroundColor:"#F65A18"}},o.loading?r.a.createElement(N.a,null):"Sign Up")),r.a.createElement(z.a,null,"Have an account?"," ",r.a.createElement(pe.a,{as:u.b,color:"green.100",to:"/login"},"Click here.")," "),o.errors.length>0&&r.a.createElement(_.a,{status:"error",backgroundColor:"inherit",color:"red.300",fontSize:"12px"},r.a.createElement(_.b,null),o.errors)))}var ye=function(){return r.a.createElement(c.a,null,r.a.createElement(i.a,null),r.a.createElement(u.a,null,r.a.createElement(j,null,r.a.createElement(s.a,{as:"div",minHeight:"100vh",backgroundColor:"gray.800",color:"white"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(de,null)),r.a.createElement(m.a,{exact:!0,path:"/login"},r.a.createElement(xe,null)),r.a.createElement(m.a,{exact:!0,path:"/signup"},r.a.createElement(ve,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,a){e.exports=a.p+"static/media/Avatar.2829d1cb.svg"},51:function(e,t,a){e.exports=a.p+"static/media/logosmall.ec0296ef.svg"},76:function(e,t,a){e.exports=a.p+"static/media/account.694e08b9.svg"},77:function(e,t,a){e.exports=a.p+"static/media/todos.c95376d3.svg"},78:function(e,t,a){e.exports=a.p+"static/media/logout.5aead5c3.svg"},79:function(e,t,a){e.exports=a.p+"static/media/logobig.f4b18087.svg"},80:function(e,t,a){e.exports=a(114)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.87addd54.chunk.js.map